<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suprovo Mallick | AI/ML Portfolio</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://github.com/DYNOSuprovo/DYNOSuprovo.github.io/blob/main/image.png?raw=true">
    
    <!-- Fonts (Minimalist Editorial Style) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Three.js (Aurora Background) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* --- 1. Root & Color Palette (Minimalist Light Mode) --- */
        :root {
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;

            /* Light Mode Palette */
            --bg-deep: #f8f8f8;
            --bg-panel: #FFFFFF;
            --border-color: rgba(0, 0, 0, 0.1);
            --border-hover: #A855F7; /* Purple Accent */
            
            --text-primary: #1a1a1a;
            --text-secondary: #777777;
            
            --accent-color: #A855F7;
        }

        /* --- 2. Global Resets & Base --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: var(--font-body);
            background: var(--bg-deep);
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        /* --- 3. 3D Background Canvas (Aurora) --- */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3; /* Subtle on light background */
        }

        /* --- 4. Main Layout & Container --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* --- 5. Navigation (Minimalist) --- */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            /* Semi-transparent light background */
            background: linear-gradient(180deg, rgba(248, 248, 248, 0.7) 0%, rgba(248, 248, 248, 0) 100%);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 100;
        }
        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text-primary);
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 1.2rem;
        }
        .nav-logo img {
            height: 30px;
        }
        .nav-links {
            display: flex;
            gap: 10px; /* Reduced gap */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            justify-content: flex-end;
        }
        .nav-link {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 6px 10px; /* Slightly smaller padding */
            border-radius: 20px;
            transition: all 0.2s ease;
            font-size: 0.9rem; /* Slightly smaller font */
        }
        .nav-link:hover {
            color: var(--text-primary);
            background: rgba(0,0,0,0.05);
        }
        .nav-link.active { /* Style for active link */
             color: var(--accent-color);
             font-weight: 600;
        }
        /* CTA button is now dark */
        .nav-cta {
            background: var(--text-primary);
            color: var(--bg-deep);
            font-weight: 600;
        }
        .nav-cta:hover {
            color: var(--bg-deep);
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        /* --- 6. Hero Section (Minimalist Typography) --- */
        .hero {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 100vh;
            padding: 120px 20px 60px; /* Adjusted padding */
        }
        .hero h1 {
            font-family: var(--font-heading);
            font-size: clamp(2.5rem, 6vw, 4rem); /* Adjusted size slightly */
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
            line-height: 1.2; /* Adjusted line height */
            animation: fadeInHero 1s ease-out 0.3s backwards;
        }
        .hero h1 .highlight {
            font-style: italic;
            color: var(--accent-color);
        }
        .hero .subtitle {
            font-size: clamp(1rem, 2.5vw, 1.15rem); /* Adjusted size */
            color: var(--text-secondary);
            max-width: 600px;
            margin-bottom: 30px;
            line-height: 1.6;
            animation: fadeInHero 1s ease-out 0.6s backwards;
        }
         .hero .role-badge { /* Added Role Badge */
            background: var(--accent-color);
            color: var(--bg-panel);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 30px;
            display: inline-block;
            animation: fadeInHero 1s ease-out 0.8s backwards;
        }
        .hero .hero-buttons { /* Container for buttons */
             display: flex;
             gap: 15px;
             margin-top: 20px;
             animation: fadeInHero 1s ease-out 0.9s backwards;
        }
        .hero .btn {
            font-family: var(--font-body); /* Sans-serif for button */
            font-size: 0.95rem; /* Adjusted size */
            text-decoration: none;
            color: var(--bg-deep);
            background: var(--text-primary);
            padding: 10px 20px; /* Adjusted padding */
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.2s ease;
            display: inline-flex; /* Align icon and text */
            align-items: center;
            gap: 8px;
        }
         .hero .btn.secondary { /* Secondary button style */
             background: transparent;
             color: var(--text-primary);
             border: 1px solid var(--border-color);
         }
        .hero .btn:hover {
            transform: scale(1.05);
            background: var(--accent-color);
            color: var(--bg-deep); /* Ensure text is readable */
            border-color: var(--accent-color); /* Match border */
        }
        
        @keyframes fadeInHero {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* --- 7. Bento Grid Layout & Sections --- */
        .section { /* Added section wrapper */
            padding: 80px 0;
        }
        .section-title { /* Added global section title */
             font-family: var(--font-heading);
             font-size: clamp(2rem, 5vw, 3rem);
             color: var(--text-primary);
             text-align: center;
             margin-bottom: 60px;
             opacity: 0;
             transform: translateY(20px);
        }
        .section-title.visible { /* Animation for section title */
             opacity: 1;
             transform: translateY(0);
             transition: all 0.6s ease-out;
        }
        .bento-grid {
            display: grid;
            /* Adjust grid template for better layout */
            grid-template-columns: repeat(3, 1fr);
            grid-auto-rows: minmax(200px, auto);
            gap: 20px;
        }
        .bento-card {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: translateY(20px);
            /* Add individual transition delays */
        }
        .bento-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Minimalist hover effect */
        .bento-card:hover {
            border-color: var(--border-hover);
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
        }
        
        /* Card Sizing - Adjusting for new layout */
        .grid-col-span-1 { grid-column: span 1; }
        .grid-col-span-2 { grid-column: span 2; }
        .grid-col-span-3 { grid-column: span 3; }
        .grid-row-span-1 { grid-row: span 1; }
        .grid-row-span-2 { grid-row: span 2; }

        @media (max-width: 950px) {
            .bento-grid {
                grid-template-columns: repeat(2, 1fr); /* 2 columns on tablet */
            }
             /* Adjust spans for tablet */
            .bento-card.tablet-col-span-2 { grid-column: span 2; }
        }
         @media (max-width: 640px) {
            .bento-grid {
                grid-template-columns: 1fr; /* 1 column on mobile */
            }
            /* Reset spans for mobile */
             .grid-col-span-1, .grid-col-span-2, .grid-col-span-3,
             .grid-row-span-1, .grid-row-span-2,
             .tablet-col-span-2 {
                 grid-column: span 1;
                 grid-row: span 1;
             }
         }
        
        /* --- 8. Bento Card Content --- */
        .card-header {
            font-family: var(--font-heading);
            font-size: 1.5rem; /* Slightly smaller header */
            margin-bottom: 15px;
            color: var(--text-primary);
        }
        .card-content {
            font-size: 0.95rem; /* Slightly smaller text */
            color: var(--text-secondary);
            line-height: 1.7;
            flex-grow: 1; /* Allow content to fill space */
        }
        .card-content p + p {
            margin-top: 15px;
        }
         .card-content ul { /* Style lists */
             list-style-position: inside;
             padding-left: 0;
             margin-top: 10px;
         }
          .card-content li {
             margin-bottom: 8px;
         }
        
        /* About Card Specifics */
        .about-timeline {
             margin-top: 20px;
        }
        .about-timeline-item {
             position: relative;
             padding-left: 20px;
             margin-bottom: 15px;
        }
         .about-timeline-item::before {
             content: '';
             position: absolute;
             left: 0;
             top: 5px;
             width: 10px;
             height: 10px;
             background-color: var(--border-color);
             border-radius: 50%;
         }
         .about-year {
             font-weight: 600;
             color: var(--text-primary);
             font-size: 1rem;
         }
         .about-desc {
             font-size: 0.9rem;
             color: var(--text-secondary);
         }
        
        /* Experience Card Specifics */
        .timeline { /* Reuse timeline style */
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 5px; /* Added margin */
        }
        .timeline-item {
            position: relative;
            padding-left: 25px;
            border-left: 1px solid var(--border-color); /* Thinner line */
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -6px; /* Adjust position */
            top: 4px;
            width: 10px; /* Smaller dot */
            height: 10px;
            background: var(--text-secondary);
            border-radius: 50%;
        }
        .timeline-date {
            font-family: var(--font-body);
            font-size: 0.85rem; /* Smaller date */
            color: var(--text-secondary);
            font-weight: 500;
             margin-bottom: 3px;
        }
        .timeline-role {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem; /* Adjusted size */
             margin-bottom: 2px;
        }
        .timeline-company {
            color: var(--text-secondary);
             font-style: italic;
             font-size: 0.9rem;
             margin-bottom: 8px;
        }
         .timeline-details {
             list-style: disc;
             margin-left: 15px;
             padding-left: 5px;
             font-size: 0.9rem;
             color: var(--text-secondary);
         }
          .timeline-details li {
             margin-bottom: 5px;
         }
        
        /* --- START: New Skills Section Styles --- */
        .skills-section-grid {
             display: grid;
             /* Responsive columns */
             grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
             gap: 15px;
             margin-top: 10px; /* Add some space below header if needed */
        }
        .skill-card {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-radius: 12px; /* Slightly less rounded */
            padding: 20px 15px; /* Adjust padding */
            text-align: center;
            transition: all 0.2s ease-in-out;
            opacity: 0; /* For scroll animation */
            transform: translateY(20px);
            cursor: default; /* Change cursor if needed */
        }
        .skill-card.visible {
             opacity: 1;
             transform: translateY(0);
        }
         .skill-card i {
             font-size: 2rem; /* Larger icon */
             color: var(--accent-color);
             margin-bottom: 12px; /* More space below icon */
             display: block; /* Center icon */
             transition: color 0.2s ease;
         }
         .skill-card span {
             font-size: 0.9rem; /* Skill name font size */
             color: var(--text-primary);
             font-weight: 500;
         }
         .skill-card:hover {
             border-color: var(--border-hover);
             transform: translateY(-5px) scale(1.03); /* Subtle scale */
             box-shadow: 0 6px 15px rgba(0,0,0,0.05);
         }
         .skill-card:hover i {
             color: var(--border-hover); /* Change icon color on hover */
         }
          .skills-footer-text { /* Reusing style for text below grid */
             margin-top: 40px;
             text-align: center;
             font-size: 0.9rem;
             color: var(--text-secondary);
         }
          .skills-footer-text p { margin-bottom: 5px; }
         .skills-footer-text strong { color: var(--text-primary); font-weight: 600; }
        /* --- END: New Skills Section Styles --- */

        /* Projects Card */
        .project-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 10px;
        }
        .project-item {
            padding: 15px;
            border-radius: 8px;
            background: rgba(0,0,0,0.03);
            border: 1px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .project-item:hover {
            background: rgba(0,0,0,0.05);
            transform: scale(1.02);
            border-color: var(--border-color);
        }
        .project-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        .project-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* Resume & Certs Card */
         .resume-summary p {
             margin-bottom: 15px;
         }
         .resume-download-btn {
             display: inline-flex;
             align-items: center;
             gap: 8px;
             margin-top: 15px;
             text-decoration: none;
             font-size: 0.9rem;
             color: var(--bg-deep);
             background: var(--text-primary);
             padding: 8px 15px;
             border-radius: 20px;
             font-weight: 600;
             transition: all 0.2s ease;
         }
         .resume-download-btn:hover {
             background: var(--accent-color);
         }
         .certifications-list {
             list-style: none;
             margin-top: 25px;
             max-height: 250px; /* Limit height and scroll */
             overflow-y: auto;
             padding-right: 10px; /* Space for scrollbar */
         }
         /* Simple scrollbar */
         .certifications-list::-webkit-scrollbar { width: 5px; }
         .certifications-list::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 3px;}
         .certifications-list::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px;}

         .cert-item {
             border-bottom: 1px solid var(--border-color);
             padding: 10px 0;
             margin-bottom: 10px;
         }
          .cert-item:last-child { border-bottom: none; margin-bottom: 0;}
         .cert-title {
             font-weight: 600;
             color: var(--text-primary);
             font-size: 0.95rem;
             margin-bottom: 3px;
         }
         .cert-issuer, .cert-date {
             font-size: 0.8rem;
             color: var(--text-secondary);
         }
         .cert-link {
             display: inline-flex;
             align-items: center;
             gap: 5px;
             text-decoration: none;
             color: var(--accent-color);
             font-size: 0.8rem;
             margin-top: 5px;
             opacity: 0.8;
             transition: opacity 0.2s ease;
         }
         .cert-link:hover { opacity: 1; }


        /* Contact Card */
        .contact-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap; /* Ensure links wrap */
            justify-content: center; /* Center links */
        }
        .contact-link {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 45px; /* Slightly smaller */
            height: 45px;
            background: rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            color: var(--text-secondary);
            font-size: 1.1rem; /* Slightly smaller */
            text-decoration: none;
            transition: all 0.2s ease;
        }
        .contact-link:hover {
            color: var(--text-primary);
            border-color: var(--accent-color);
            transform: scale(1.1);
        }
        
        /* --- 9. Footer --- */
        .footer {
            text-align: center;
            padding: 40px 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* --- 10. Modal (Minimalist Skin) --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px; /* Padding for small screens */
        }
        .modal-content {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 30px;
            width: 100%; /* Use padding for spacing */
            max-width: 600px;
            position: relative;
            animation: zoomIn 0.3s ease-out;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-height: 90vh; /* Prevent overflow */
            overflow-y: auto; /* Allow scroll if needed */
        }
        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .modal-close:hover {
            color: var(--text-primary);
            border-color: var(--accent-color);
        }
        #modal-project-title {
            font-family: var(--font-heading);
            font-size: 1.8rem;
            color: var(--accent-color); /* No gradient */
            margin-bottom: 15px;
        }
        #modal-project-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
         /* Use skill-tag style for consistency */
         #modal-project-stack .skill-tag { 
             font-size: 0.8rem; 
             padding: 3px 8px; 
             background: rgba(0,0,0,0.03); /* Slightly different background */
         }
        #modal-project-description {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 20px;
             font-size: 0.95rem;
        }
         #modal-project-description ul { /* Style lists inside description */
             list-style: disc;
             margin-left: 20px;
             margin-top: 10px;
             padding-left: 5px;
         }
         #modal-project-description li { margin-bottom: 5px; }

        .modal-links {
            display: flex;
            gap: 15px;
             flex-wrap: wrap; /* Allow wrapping */
        }
        .modal-link {
            text-decoration: none;
            padding: 8px 18px; /* Adjusted padding */
            border-radius: 20px;
            font-weight: 500;
            transition: all 0.2s ease;
             font-size: 0.9rem;
             display: inline-flex;
             align-items: center;
             gap: 8px;
        }
        .modal-link.primary {
            background: var(--text-primary);
            color: var(--bg-deep);
        }
        .modal-link.secondary {
            background: rgba(0,0,0,0.05);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        .modal-link:hover {
            opacity: 0.8;
        }
        /* AI Summary Button Style */
         .btn-ai-summary {
             background: transparent;
             color: var(--accent-color);
             border: 1px solid var(--accent-color);
             opacity: 0.8;
         }
         .btn-ai-summary:hover {
             background: var(--accent-color);
             color: var(--bg-deep);
             opacity: 1;
         }

         /* Simple AI Summary Modal */
          #ai-summary-modal .modal-content { max-width: 500px; }
          #ai-summary-text { font-size: 0.95rem; line-height: 1.6; color: var(--text-secondary); }
          #ai-summary-text i { color: var(--text-primary); } /* Style loading text */


    </style>
</head>
<body>

    <!-- Canvas (Dark particles on light bg) -->
    <canvas id="bg-canvas"></canvas>

    <!-- Navigation -->
    <nav class="navbar container">
        <a href="#home" class="nav-logo">
            <img src="https://github.com/DYNOSuprovo/DYNOSuprovo.github.io/blob/main/image.png?raw=true" alt="Logo">
            Suprovo Mallick
        </a>
        <div class="nav-links">
            <a href="#home" class="nav-link active">Home</a>
            <a href="#about" class="nav-link">About</a>
            <a href="#experience" class="nav-link">Experience</a>
            <a href="#skills" class="nav-link">Skills</a>
            <a href="#projects" class="nav-link">Projects</a>
            <a href="#resume" class="nav-link">Resume</a>
            <a href="#contact" class="nav-link nav-cta">Contact</a>
        </div>
    </nav>

    <!-- Hero -->
    <section id="home" class="hero container">
        <h1>Suprovo <span class="highlight">Mallick</span></h1>
        <p class="subtitle">AI/ML Developer • GenAI Enthusiast • Problem Solver</p>
         <span class="role-badge">GenAI Developer | RAG Specialist</span>
         <div class="hero-buttons">
            <a href="#projects" class="btn">View My Work</a>
            <a href="#resume" class="btn secondary">View Resume</a> 
         </div>
    </section>

    <!-- Main Content Sections -->
    <main class="container">
        
        <!-- About Section -->
         <section id="about" class="section">
             <h2 id="about-title" class="section-title">About Me</h2>
            <div class="bento-grid">
                <div class="bento-card grid-col-span-2 tablet-col-span-2"> 
                    <div class="card-content">
                        <p>I'm a passionate AI/ML developer from India, currently pursuing Computer Science at KIIT. My journey in AI began with a deep curiosity about how machines can understand and generate human language, evolving into a mission to build intelligent applications that solve real-world problems.</p>
                        <p>I specialize in leveraging cutting-edge technologies like LangChain, Gemini API, and Retrieval-Augmented Generation (RAG) architectures to create dynamic and responsive solutions. My experience includes designing personalized chatbots, developing intelligent recommendation systems like Aahar AI, and building multilingual translation applications.</p>
                        <p>I thrive on bringing innovative ideas to life through code, optimizing model performance, and deploying scalable AI solutions. When I'm not immersed in development, you'll find me delving into new research papers, contributing to open-source projects, or sharing knowledge within the developer community.</p>
                    </div>
                </div>
                 <div class="bento-card grid-col-span-1 grid-row-span-1">
                     <h3 class="card-header" style="font-size: 1.5rem;">Timeline</h3> 
                    <div class="card-content about-timeline">
                         <div class="about-timeline-item">
                             <div class="about-year">2023</div>
                             <div class="about-desc">Began deep dive into Machine Learning.</div>
                        </div>
                         <div class="about-timeline-item">
                             <div class="about-year">2024 (Early)</div>
                             <div class="about-desc">Developed first end-to-end RAG system.</div>
                        </div>
                         <div class="about-timeline-item">
                             <div class="about-year">Jul 2024</div>
                             <div class="about-desc">Started role at Fed Society (AI/GenAI Dev).</div>
                        </div>
                         <div class="about-timeline-item">
                             <div class="about-year">2024 (Mid)</div>
                             <div class="about-desc">Launched Hindu Q&A & Translate-V2.</div>
                        </div>
                         <div class="about-timeline-item">
                             <div class="about-year">2025</div>
                             <div class="about-desc">Focusing on advanced LLM Ops & GenAI.</div>
                        </div>
                     </div>
                </div>
             </div>
         </section>

         <!-- Experience Section -->
          <section id="experience" class="section">
             <h2 id="experience-title" class="section-title">Experience</h2>
             <div class="bento-grid" style="grid-template-columns: 1fr;"> <!-- Force single column for this section -->
                 <div class="bento-card"> 
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-date">Jul 2024 – Present</div>
                            <div class="timeline-role">AI Chatbot & GenAI App Developer</div>
                            <div class="timeline-company">Fed Society</div>
                            <ul class="timeline-details">
                               <li>Designed and deployed personalized chatbot using Gemini API.</li>
                               <li>Developed <strong>Aahar AI</strong>, an intelligent diet assistant.</li>
                               <li>Created modular FastAPI backend with RAG pipeline.</li>
                               <li>Integrated medical history parsing & PDF chunking (93% accuracy).</li>
                               <li>Achieved 30% faster retrieval using optimized ChromaDB.</li>
                               <li>Collaborated in Agile environment for timely delivery.</li>
                           </ul>
                        </div>
                        <!-- Add more timeline-item blocks here -->
                    </div>
                </div>
             </div>
          </section>

        <!-- Skills Section - New Design -->
          <section id="skills" class="section">
             <h2 id="skills-title" class="section-title">Technical Toolkit</h2>
             <div class="skills-section-grid" id="skills-grid">
                 <!-- Skill cards will be injected by JS -->
             </div>
             <div class="skills-footer-text">
                 <p><strong>Development Practices:</strong> Agile Development, ORM, REST API Design, CI/CD</p>
                 <p><strong>Also proficient in:</strong> Leadership, Communication, Problem Solving, Teamwork, Adaptability, Time Management</p>
             </div>
          </section>
            
        <!-- Projects Section -->
          <section id="projects" class="section">
             <h2 id="projects-title" class="section-title">Featured Projects</h2>
             <div class="bento-grid" style="grid-template-columns: 1fr;"> <!-- Force single column -->
                <div class="bento-card">
                    <div class="project-list" id="project-list">
                        <!-- Projects will be injected by JS -->
                    </div>
                </div>
            </div>
          </section>
            
         <!-- Resume & Certs Section -->
          <section id="resume" class="section">
             <h2 id="resume-title" class="section-title">Resume & Certifications</h2>
             <div class="bento-grid">
                <div class="bento-card grid-col-span-2 tablet-col-span-2">
                     <h2 class="card-header">Resume Highlights</h2>
                    <div class="card-content resume-summary">
                         <p>As a driven AI/ML Developer, I bring a strong foundation in machine learning, deep learning, and generative AI. My expertise spans building intelligent applications, optimizing models, and implementing RAG architectures for enhanced context awareness.</p>
                         <p>Key highlights include:</p>
                         <ul>
                             <li>Developed and deployed RAG-based AI assistants (Aahar AI, Hindu Q&A) using LangChain and Gemini API.</li>
                             <li>Built and deployed multilingual NMT systems (Translate-V2) using Transformers & FastAPI.</li>
                             <li>Proficient in Python, TensorFlow, PyTorch, and various data science libraries.</li>
                             <li>Experienced in cloud platforms (Hugging Face Spaces, Firebase, Google Cloud) and containerization (Docker).</li>
                             <li>Committed to continuous learning and open-source contributions.</li>
                         </ul>
                        <a href="Suprovo_Mallick_Resume.pdf" target="_blank" class="resume-download-btn" download>
                            <i class="fas fa-download"></i> Download Resume (PDF)
                        </a>
                     </div>
                </div>
                 <div class="bento-card grid-col-span-1 grid-row-span-1 tablet-col-span-2">
                     <h2 class="card-header">Certifications</h2>
                     <div class="card-content">
                         <ul class="certifications-list">
                            <li>
                                <div class="cert-title">Supervised ML: Regression & Classification</div>
                                <div class="cert-issuer">DeepLearning.AI, Stanford</div>
                                <div class="cert-date">May 2024</div>
                                <a href="https://www.coursera.org/account/accomplishments/certificate/AFZPVCBNNWFZ" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                            </li>
                             <li>
                                <div class="cert-title">Python for Data Science, AI & Dev</div>
                                <div class="cert-issuer">IBM</div>
                                <div class="cert-date">May 2024</div>
                                <a href="https://www.coursera.org/account/accomplishments/certificate/UH8KMBNEUK7L" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                            </li>
                              <li>
                                <div class="cert-title">Google AI Essentials</div>
                                <div class="cert-issuer">Google</div>
                                <div class="cert-date">Jul 2024</div>
                                <a href="https://www.credly.com/badges/KGLM9TZEJ8C4" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                            </li>
                             <li>
                                <div class="cert-title">Intro to Generative AI Path</div>
                                <div class="cert-issuer">Google Cloud</div>
                                <div class="cert-date">Jul 2024</div>
                                <a href="https://www.credly.com/badges/WWZDLR7QL85S" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                            </li>
                            <li>
                                <div class="cert-title">Career Essentials in Generative AI</div>
                                <div class="cert-issuer">Microsoft & LinkedIn</div>
                                <div class="cert-date">Jul 2024</div>
                            </li>
                             <li>
                                <div class="cert-title">Intro to Large Language Models</div>
                                <div class="cert-issuer">Google Cloud</div>
                                <div class="cert-date">Jul 2024</div>
                                 <a href="https://www.coursera.org/account/accomplishments/certificate/D5ELP7BHZ224" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                            </li>
                             <li>
                                <div class="cert-title">Implementing Page Navigation in Flutter</div>
                                <div class="cert-issuer">Google Cloud</div>
                                <div class="cert-date">May 2024</div>
                                <a href="https://www.coursera.org/account/accomplishments/certificate/ETAY2X5DFH5V" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                             </li>
                              <li>
                                <div class="cert-title">Introduction to Front-End Development</div>
                                <div class="cert-issuer">Meta</div>
                                <div class="cert-date">May 2024</div>
                                 <a href="https://www.coursera.org/account/accomplishments/certificate/53YU9V6Y67K9" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                             </li>
                             <li>
                                <div class="cert-title">Digital Skills: Artificial Intelligence</div>
                                <div class="cert-issuer">Accenture</div>
                                <div class="cert-date">Jul 2024</div>
                            </li>
                              <li>
                                <div class="cert-title">GenAI: Evolution of Online Search</div>
                                <div class="cert-issuer">LinkedIn</div>
                                <div class="cert-date">Jul 2024</div>
                            </li>
                             <li>
                                <div class="cert-title">Learning Microsoft 365 Copilot</div>
                                <div class="cert-issuer">LinkedIn</div>
                                <div class="cert-date">Jul 2024</div>
                            </li>
                             <li>
                                <div class="cert-title">ML with PySpark: Churn Analysis</div>
                                <div class="cert-issuer">Coursera Project Network</div>
                                <div class="cert-date">Jul 2024</div>
                                <a href="https://www.coursera.org/account/accomplishments/certificate/GWQWBUJR4WJY" target="_blank" class="cert-link"><i class="fas fa-external-link-alt"></i> Credential</a>
                            </li>
                              <li>
                                <div class="cert-title">Streamlining Work with MS Copilot</div>
                                <div class="cert-issuer">LinkedIn</div>
                                <div class="cert-date">Jul 2024</div>
                            </li>
                             <li>
                                <div class="cert-title">What Is Generative AI?</div>
                                <div class="cert-issuer">LinkedIn</div>
                                <div class="cert-date">Jul 2024</div>
                            </li>
                         </ul>
                     </div>
                </div>
             </div>
         </section>

         <!-- Contact Section -->
          <section id="contact" class="section">
             <h2 id="contact-title" class="section-title">Contact</h2>
             <div class="bento-grid" style="grid-template-columns: 1fr;"> <!-- Force single column -->
                <div class="bento-card">
                    <h2 class="card-header">Let's Connect</h2>
                    <div class="card-content">
                        <p>Interested in collaborating or have a question? I'm always open to discussing new ideas and opportunities.</p>
                        <div class="contact-links">
                            <a href="https://github.com/DYNOSuprovo" target="_blank" class="contact-link" title="GitHub"><i class="fa-brands fa-github"></i></a>
                            <a href="https://www.linkedin.com/in/suprovo-mallick-abb582287/" target="_blank" class="contact-link" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
                            <a href="https://twitter.com/suprovo1307" target="_blank" class="contact-link" title="Twitter/X"><i class="fa-brands fa-twitter"></i></a>
                             <a href="https://leetcode.com/supromallick3/" target="_blank" class="contact-link" title="LeetCode"><i class="fas fa-code"></i></a>
                            <a href="https://www.hackerrank.com/profile/supromallick3" target="_blank" class="contact-link" title="HackerRank"><i class="fab fa-hackerrank"></i></a>
                            <a href="mailto:supromallick3@gmail.com" class="contact-link" title="Email"><i class="fa-solid fa-envelope"></i></a>
                        </div>
                    </div>
                </div>
            </div>
         </section>

    </main>

    <!-- Footer -->
    <footer class="footer container">
        Designed & Built by Suprovo Mallick
    </footer>
    
    <!-- Project Modal -->
    <div class="modal-overlay" id="project-modal">
        <div class="modal-content">
            <div class="modal-close" id="modal-close-btn"><i class="fa-solid fa-times"></i></div>
            <h2 id="modal-project-title">Project Title</h2>
            <div class="skills-grid" id="modal-project-stack">
                <!-- Modal skills injected by JS -->
            </div>
            <div id="modal-project-description">
                 <!-- Description including list points -->
            </div>
            <div class="modal-links">
                <a href="#" id="modal-link-live" target="_blank" class="modal-link primary">
                    <i class="fa-solid fa-rocket"></i> Live Demo
                </a>
                <a href="#" id="modal-link-github" target="_blank" class="modal-link secondary">
                    <i class="fa-brands fa-github"></i> View Code
                </a>
                <button class="modal-link secondary btn-ai-summary" id="modal-ai-summary-btn">
                     <i class="fas fa-robot"></i> AI Summary
                </button>
            </div>
        </div>
    </div>
    
    <!-- AI Summary Modal -->
     <div class="modal-overlay" id="ai-summary-modal" style="z-index: 1001;">
        <div class="modal-content">
            <div class="modal-close" id="ai-summary-close-btn"><i class="fa-solid fa-times"></i></div>
            <h2 style="color: var(--accent-color); font-family: var(--font-heading); margin-bottom: 15px;">AI Project Summary</h2>
            <p id="ai-summary-text"><i>Generating summary...</i></p>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", () => {
            
            // --- Modal Functions (Defined early) ---
            const projectModal = document.getElementById('project-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const aiSummaryModal = document.getElementById('ai-summary-modal');
            const aiSummaryCloseBtn = document.getElementById('ai-summary-close-btn');
            const aiSummaryTextElement = document.getElementById('ai-summary-text');
             let currentProjectForAISummary = null; // Store project name for AI modal

            const openModal = (project) => {
                if (!projectModal) return;
                currentProjectForAISummary = project.title; // Set current project for AI summary
                document.getElementById('modal-project-title').textContent = project.title;
                
                // --- Populate Description including points ---
                 const descriptionContainer = document.getElementById('modal-project-description');
                 descriptionContainer.innerHTML = ''; // Clear previous
                 // Add main description paragraph if exists
                 if (project.main_desc) {
                     const p = document.createElement('p');
                     p.textContent = project.main_desc;
                     descriptionContainer.appendChild(p);
                 }
                // Add bullet points if they exist
                 if (project.points && project.points.length > 0) {
                     const ul = document.createElement('ul');
                     project.points.forEach(point => {
                         const li = document.createElement('li');
                         // Use innerHTML to allow for <strong> tags etc. if needed later
                         li.innerHTML = point; 
                         ul.appendChild(li);
                     });
                     descriptionContainer.appendChild(ul);
                 }
                // --- End Description Population ---
                
                const stackContainer = document.getElementById('modal-project-stack');
                stackContainer.innerHTML = '';
                 if (project.stack && project.stack.length > 0) { // Check if stack exists
                     project.stack.forEach(tech => {
                        const tag = document.createElement('span');
                        tag.className = 'skill-tag'; // Use skill-tag style
                        tag.textContent = tech;
                        stackContainer.appendChild(tag);
                     });
                 }
                
                const liveLink = document.getElementById('modal-link-live');
                const githubLink = document.getElementById('modal-link-github');
                 const aiSummaryBtn = document.getElementById('modal-ai-summary-btn');
                
                if (project.links.live) {
                    liveLink.href = project.links.live;
                    liveLink.style.display = 'inline-flex';
                } else {
                    liveLink.style.display = 'none';
                }
                
                if (project.links.github) {
                    githubLink.href = project.links.github;
                    githubLink.style.display = 'inline-flex';
                } else {
                    githubLink.style.display = 'none';
                }
                
                // Show AI summary button for all projects now
                 aiSummaryBtn.style.display = 'inline-flex'; 

                projectModal.style.display = 'flex';
                // Trigger Project Gateway Effect
                const modalContent = projectModal.querySelector('.modal-content');
                if (modalContent) {
                    triggerParticleSwirlAroundElement(modalContent, 0xA855F7); // Purple accent
                }
            };

            const closeModal = () => {
                if (projectModal) projectModal.style.display = 'none';
            };
            
             const openAISummaryModal = () => {
                 if(aiSummaryModal) aiSummaryModal.style.display = 'flex';
             }
             const closeAISummaryModal = () => {
                  if(aiSummaryModal) aiSummaryModal.style.display = 'none';
             }

            // Attach modal close events
            if (projectModal && modalCloseBtn) { // Added null check for button
                 modalCloseBtn.addEventListener('click', closeModal);
                projectModal.addEventListener('click', (e) => {
                    if (e.target === projectModal) closeModal();
                });
            }
             // AI Summary Modal events
            if (aiSummaryModal && aiSummaryCloseBtn) { // Added null check for button
                 aiSummaryCloseBtn.addEventListener('click', closeAISummaryModal);
                 aiSummaryModal.addEventListener('click', (e) => {
                     if(e.target === aiSummaryModal) closeAISummaryModal();
                 });
             }

            // --- 1. 3D Particle Background (Light Mode) ---
            let scene, camera, renderer, particles;
            let mouseX = 0, mouseY = 0;
            const canvas = document.getElementById('bg-canvas');
            let particlePositions, particleColors;
            let mouseParticle;
             let animationFrameId = null; // To control animation loop

            function initThreeJS() {
                try {
                     if (!canvas) return; // Exit if canvas not found
                    scene = new THREE.Scene();
                    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                    camera.position.z = 5;

                    renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    
                    const particleCount = 5000;
                    particlePositions = new Float32Array(particleCount * 3);
                    particleColors = new Float32Array(particleCount * 3);
                    const particleGeometry = new THREE.BufferGeometry();
                    const color = new THREE.Color();

                    for (let i = 0; i < particleCount; i++) {
                        const x = (Math.random() - 0.5) * 10;
                        const y = (Math.random() - 0.5) * 10;
                        const z = (Math.random() - 0.5) * 10;
                        particlePositions[i * 3] = x;
                        particlePositions[i * 3 + 1] = y;
                        particlePositions[i * 3 + 2] = z;

                        // Color (Dark Grays)
                        color.setHSL(0, 0, Math.random() * 0.3); // 0% to 30% lightness
                        particleColors[i * 3] = color.r;
                        particleColors[i * 3 + 1] = color.g;
                        particleColors[i * 3 + 2] = color.b;
                    }

                    particleGeometry.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
                    particleGeometry.setAttribute('color', new THREE.BufferAttribute(particleColors, 3));

                    const particleMaterial = new THREE.PointsMaterial({
                        size: 0.02,
                        vertexColors: true,
                        transparent: true,
                        opacity: 0.7,
                        blending: THREE.NormalBlending // Use NormalBlending for dark particles
                    });

                    particles = new THREE.Points(particleGeometry, particleMaterial);
                    scene.add(particles);

                    // Mouse follower particle (Dark)
                    const mouseParticleGeometry = new THREE.BufferGeometry();
                    const mouseParticlePositions = new Float32Array([0, 0, 0]); // Init at 0,0,0
                    const mouseParticleColors = new Float32Array([0.2, 0.2, 0.2]); // Dark gray
                    mouseParticleGeometry.setAttribute('position', new THREE.BufferAttribute(mouseParticlePositions, 3));
                    mouseParticleGeometry.setAttribute('color', new THREE.BufferAttribute(mouseParticleColors, 3));
                    const mouseParticleMaterial = new THREE.PointsMaterial({
                        size: 0.05,
                        vertexColors: true,
                        transparent: true,
                        opacity: 0.8,
                        blending: THREE.NormalBlending
                    });
                    mouseParticle = new THREE.Points(mouseParticleGeometry, mouseParticleMaterial);
                    scene.add(mouseParticle);

                    window.addEventListener('resize', onWindowResize);
                    document.addEventListener('mousemove', onDocumentMouseMove);
                    
                     // Start animation only if successful
                     if (animationFrameId) cancelAnimationFrame(animationFrameId); // Stop previous if exists
                     animate();

                } catch(e) {
                    console.error("Three.js init failed:", e);
                    if (canvas) canvas.style.display = 'none';
                }
            }
            
            function onWindowResize() {
                if (!camera || !renderer) return;
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }

            function onDocumentMouseMove(event) {
                mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
            }

            function animate() {
                 animationFrameId = requestAnimationFrame(animate); // Store the frame ID
                if (!renderer || !scene || !camera || !particles || !mouseParticle) return; // Add checks here too
                
                particles.rotation.x += 0.0001;
                particles.rotation.y += 0.0002;
                
                camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.02;
                camera.position.y += (mouseY * 0.5 - camera.position.y) * 0.02;
                camera.lookAt(scene.position);

                // Update Spark Trail
                 try { // Add try-catch for safety
                     const vector = new THREE.Vector3(mouseX, mouseY, 0.5).unproject(camera); // Use 0.5 for depth
                     const dir = vector.sub(camera.position).normalize();
                     const distance = -camera.position.z / dir.z; // Calculate distance based on Z
                     
                     if (distance > 0 && distance < 1000 && !isNaN(distance)) { 
                         const pos = camera.position.clone().add(dir.multiplyScalar(distance));
                         if (!isNaN(pos.x) && !isNaN(pos.y) && !isNaN(pos.z)) {
                             mouseParticle.geometry.attributes.position.array[0] = pos.x;
                             mouseParticle.geometry.attributes.position.array[1] = pos.y;
                             mouseParticle.geometry.attributes.position.array[2] = pos.z;
                             mouseParticle.geometry.attributes.position.needsUpdate = true;
                         }
                     }
                 } catch (e) {
                     console.warn("Error updating mouse particle:", e); // Log warning instead of stopping animation
                 }
                
                renderer.render(scene, camera);
            }

            initThreeJS(); // Initialize Three.js
            
            // --- 2. Dynamic Data Injection ---
            
            const projects = [ // Using the provided list
                {
                    "id": "project-01",
                    "title": "Aahar AI - Diet & Health Recommendation",
                     "main_desc": "Developed AI-powered diet advisor that parses PDF-based diet plans and generates health insights.",
                    "points": [
                        "Implemented RetrievalQA with vector embeddings for contextual query response.",
                        "Reduced response latency by 40% via API caching and async processing.",
                        "Backend hosted with FastAPI and frontend built in Flutter for cross-platform access."
                     ],
                    "stack": ["FastAPI", "Flutter", "Gemini", "ChromaDB", "Hugging Face"],
                    "links": { "live": "https://aaharai.firebaseapp.com/", "github": null }
                },
                {
                    "id": "project-02",
                    "title": "Translate-V2 – Neural Machine Translation",
                     "main_desc": "Built and deployed a multilingual translation system (Nepali & Sinhala → English) using fine-tuned NLLB-200 model.",
                     "points": [
                        "Integrated FastAPI backend and interactive web UI for real-time translations.",
                        "Containerized app with Docker and deployed to Hugging Face Spaces.",
                        "Achieved 92% BLEU score on test corpus; reduced inference latency by 38%."
                     ],
                    "stack": ["FastAPI", "Transformers", "PyTorch", "Docker", "Hugging Face"],
                    "links": { "live": "https://huggingface.co/spaces/Dyno1307/Translate-V2", "github": null }
                },
                 {
                    "id": "project-03",
                    "title": "Hindu Scripture Q&A App",
                     "main_desc": "Built a RAG-based AI assistant that answers questions from Hindu scriptures.",
                     "points": [
                        "Embedded scripture PDFs into ChromaDB vectors for contextual conversation memory.",
                         "Enabled multi-turn reasoning and LAN-based backend for faster access."
                     ],
                    "stack": ["FastAPI", "Flutter", "Streamlit", "LangChain", "Gemini", "ChromaDB"],
                    "links": { "live": "https://hindugptbydrago.streamlit.app/", "github": "https://github.com/DYNOSuprovo/Hindu" }
                },
                {
                    "id": "project-04",
                    "title": "AI Expense Advisor (India Edition)",
                     "main_desc": "Built a budgeting assistant that generates sarcastic financial advice using Gemini API.",
                     "points": [
                        "Integrated embeddings, sentence transformers, and FAQ matcher for dynamic query understanding.",
                        "Enhanced UI with income sliders and visual charts, boosting user engagement by 25%."
                     ],
                    "stack": ["Streamlit", "Gemini API", "LangChain", "Hugging Face", "RAG"],
                    "links": { "live": "https://nltk-exp-hfdde4w7vwxjnjjijvcsdi.streamlit.app/", "github": "https://github.com/DYNOSuprovo/NLTK-EXP" }
                },
                {
                    "id": "project-05",
                    "title": "ProblemSolverQP",
                     "main_desc": "Automated parser that reads academic question papers and generates model answers.",
                     "points": [
                         "Used regex and NLP-based keyword detection to structure output efficiently."
                     ],
                    "stack": ["Python", "Streamlit", "Regex", "NLP"],
                    "links": { "live": "https://question-paper-solver-4hrjgkllywsdrzxchusqb3.streamlit.app/", "github": "https://github.com/DYNOSuprovo/ProblemSolverQP" }
                },
                {
                    "id": "project-06",
                    "title": "User Churn Prediction Model",
                    "main_desc": "Built real-time user churn prediction model with logistic regression and TensorFlow.",
                    "points": [
                        "Achieved 0.87 AUC and 85% accuracy on validation data through feature scaling.",
                        "Deployed ML pipeline for live input inference."
                    ],
                    "stack": ["TensorFlow", "scikit-learn", "Python"],
                    "links": { "live": null, "github": null }
                },
                {
                    "id": "project-07",
                    "title": "Car Price Prediction",
                    "main_desc": "Trained regression models on car dataset with hyperparameter tuning.",
                    "points": [
                        "Conducted EDA and model comparison (Ridge, Lasso, Random Forest) with MAE = 2.4."
                    ],
                    "stack": ["NumPy", "Pandas", "scikit-learn", "Python"],
                    "links": { "live": null, "github": null }
                },
                 {
                    "id": "project-08",
                    "title": "Diabetes Prediction Model",
                     "main_desc": "Built classification pipeline on real-world data using Logistic Regression and Random Forest.",
                     "points": [
                        "Improved model F1-score by 10% via feature scaling and class balancing."
                     ],
                    "stack": ["scikit-learn", "Matplotlib", "Python"],
                    "links": { "live": null, "github": null }
                }
            ];

            // Define skill icons (Font Awesome classes)
             const skillIcons = {
                 "Python": "fab fa-python", "Java": "fab fa-java", "C": "fas fa-c", "C++": "fas fa-c", "Dart": "fab fa-dev", 
                 "TensorFlow": "fas fa-brain", "PyTorch": "fas fa-robot", "scikit-learn": "fas fa-project-diagram",
                 "NumPy": "fas fa-calculator", "Pandas": "fas fa-table", "Matplotlib": "fas fa-chart-line",
                 "LangChain": "fas fa-link", "Streamlit": "fas fa-stream", "FastAPI": "fas fa-rocket", "React": "fab fa-react",
                 "Firebase": "fas fa-fire", "Transformers": "fas fa-box-open", "Sentence Trans.": "fas fa-language",
                 "Gemini API": "fas fa-star-of-life", "ChromaDB": "fas fa-database", "FAISS": "fas fa-cube", "Ollama": "fas fa-download",
                 "Hugging Face": "fab fa-hugging-face",
                 "Git": "fab fa-git-alt", "GitHub": "fab fa-github", "Docker": "fab fa-docker", "Google Cloud": "fab fa-google",
                 "Google Colab": "fas fa-book", "Jupyter": "fas fa-flask", "VS Code": "fas fa-code",
                 "Flutter": "fab fa-dev", "Figma": "fab fa-figma", "Fusion 360": "fas fa-drafting-compass", "SolidWorks": "fas fa-ruler-combined",
                 "default": "fas fa-microchip"
             };

            const skills = [
                "Python", "Java", "C", "C++", "Dart", 
                "TensorFlow", "PyTorch", "scikit-learn", 
                "NumPy", "Pandas", "Matplotlib", 
                "LangChain", "Streamlit", "FastAPI", "React",
                "Firebase", "Transformers", "Sentence Trans.",
                "Gemini API", "ChromaDB", "FAISS", "Ollama",
                "Hugging Face", 
                "Git", "GitHub", "Docker", "Google Cloud",
                "Google Colab", "Jupyter", "VS Code",
                "Flutter", "Figma", "Fusion 360", "SolidWorks"
            ];

            // --- Inject Skill Cards into the new Grid ---
             const skillsGridContainer = document.getElementById('skills-grid'); 
             if (skillsGridContainer) {
                 skills.forEach((skill, index) => {
                     const card = document.createElement('div');
                     card.className = 'skill-card'; // Use new card class
                     // Add transition delay for staggered animation
                     card.style.transitionDelay = `${index * 0.03}s`; 

                     const iconClass = skillIcons[skill] || skillIcons["default"]; 
                     card.innerHTML = `
                         <i class="${iconClass}"></i>
                         <span>${skill}</span>
                     `; 
                     skillsGridContainer.appendChild(card);
                 });
             }


            const projectList = document.getElementById('project-list');
            if (projectList) {
                projects.forEach(project => {
                    const item = document.createElement('div');
                    item.className = 'project-item';
                     const descPreview = project.main_desc ? project.main_desc.substring(0, 80) + '...' : 
                                       (project.points && project.points.length > 0 ? project.points[0].substring(0, 80) + '...' : 'Click to see details...');
                    item.innerHTML = `
                        <div class="project-title">${project.title}</div>
                        <div class="project-desc">${descPreview}</div>
                    `;
                    item.addEventListener('click', () => openModal(project));
                    projectList.appendChild(item);
                });
            }

            // --- 3. Smooth Scrolling & Active Nav Link ---
             const navLinks = document.querySelectorAll('.nav-link');
             const sections = document.querySelectorAll('section[id], h2.section-title[id]'); 

             function updateActiveLink() {
                 let currentSectionId = 'home'; 
                 const scrollPosition = window.pageYOffset;
                 const navHeight = document.querySelector('.navbar')?.offsetHeight || 60;

                 sections.forEach(section => {
                     const sectionElement = section.tagName === 'H2' ? section : document.getElementById(section.id);
                     if (sectionElement && sectionElement.offsetTop <= scrollPosition + navHeight + 50) { 
                         currentSectionId = sectionElement.id.replace('-title', ''); 
                     }
                 });

                 navLinks.forEach(link => {
                     link.classList.remove('active');
                     const linkHref = link.getAttribute('href')?.substring(1); 
                     if (linkHref === currentSectionId) {
                         link.classList.add('active');
                     }
                 });
             }
             
            document.querySelectorAll('.nav-link, .btn, .nav-logo').forEach(anchor => { 
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        e.preventDefault();
                        const targetId = href.substring(1);
                         const targetElement = document.getElementById(targetId) || document.getElementById(targetId + '-title'); 
                        if (targetElement) {
                             const navHeight = document.querySelector('.navbar')?.offsetHeight || 60; // Use fallback
                             const elementPosition = targetElement.getBoundingClientRect().top;
                             const offsetPosition = elementPosition + window.pageYOffset - navHeight;
                            
                            window.scrollTo({
                                top: offsetPosition,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });

             window.addEventListener('scroll', updateActiveLink);
             updateActiveLink(); 

            // --- 4. Fade-in on Scroll for Bento Cards, Section Titles & Skill Cards ---
             const observerElements = document.querySelectorAll('.bento-card, .section-title, .skill-card'); // Observe skill cards too
            const appearOptions = {
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px"
            };

            const appearOnScroll = new IntersectionObserver(function(entries, observer) {
                 entries.forEach((entry, index) => {
                    if (!entry.isIntersecting) {
                        return;
                    } else {
                         // Apply staggered delay only to skill cards for now
                          const delay = entry.target.classList.contains('skill-card') ? index * 0.03 : 0;
                         entry.target.style.transition = `all 0.6s ease-out ${delay}s`; 
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, appearOptions);

             observerElements.forEach(el => {
                appearOnScroll.observe(el);
            });


            // --- 5. CANVAS EFFECTS (Light Mode) ---

            function screenToWorld(x, y) {
                if (!camera) return null; 
                try { // Added try-catch for unproject issues
                    const vector = new THREE.Vector3();
                    vector.set((x / window.innerWidth) * 2 - 1, -(y / window.innerHeight) * 2 + 1, 0.5);
                    vector.unproject(camera);
                    const dir = vector.sub(camera.position).normalize();
                    const distance = -camera.position.z / dir.z;
                    if (distance < 0 || distance > 1000 || isNaN(distance)) return null; 
                    const worldPos = camera.position.clone().add(dir.multiplyScalar(distance));
                    if (isNaN(worldPos.x) || isNaN(worldPos.y) || isNaN(worldPos.z)) return null; 
                    return worldPos;
                } catch (e) {
                    console.warn("screenToWorld error:", e);
                    return null;
                }
            }

            // "Skill Burst" on Hover - Attaching listener using delegation
             const skillsGridContainerElement = document.getElementById('skills-grid'); // Renamed variable
             if (skillsGridContainerElement) {
                 skillsGridContainerElement.addEventListener('mouseenter', (e) => {
                     // Check if the event target is a skill-card
                     const skillCard = e.target.closest('.skill-card'); 
                     if (skillCard) {
                         const rect = skillCard.getBoundingClientRect();
                         const centerX = rect.left + rect.width / 2;
                         const centerY = rect.top + rect.height / 2;
                         const worldPos = screenToWorld(centerX, centerY);
                         // Trigger burst effect on the skill-card
                         if (worldPos) triggerParticleBurst(worldPos.x, worldPos.y, worldPos.z, 0x555555); 
                     }
                 }, true); // Use capture phase
             }


            function triggerParticleBurst(x, y, z, color = 0x555555, num = 30, spread = 0.3) { 
                if (isNaN(x) || isNaN(y) || isNaN(z) || !scene) return; 
                
                const burstGeometry = new THREE.BufferGeometry();
                const burstPositions = new Float32Array(num * 3);
                const burstColors = new Float32Array(num * 3);
                const tempColor = new THREE.Color(color);

                for (let i = 0; i < num; i++) {
                    burstPositions[i * 3] = x + (Math.random() - 0.5) * spread;
                    burstPositions[i * 3 + 1] = y + (Math.random() - 0.5) * spread;
                    burstPositions[i * 3 + 2] = z + (Math.random() - 0.5) * spread;
                    
                    burstColors[i * 3] = tempColor.r;
                    burstColors[i * 3 + 1] = tempColor.g;
                    burstColors[i * 3 + 2] = tempColor.b;
                }
                 // Safety check before setting attributes
                if (burstPositions.some(isNaN) || burstColors.some(isNaN)) {
                    console.warn("NaN value detected in burst particle data.");
                    return; 
                }
                burstGeometry.setAttribute('position', new THREE.BufferAttribute(burstPositions, 3));
                burstGeometry.setAttribute('color', new THREE.BufferAttribute(burstColors, 3));

                const burstMaterial = new THREE.PointsMaterial({
                    size: 0.04, 
                    vertexColors: true,
                    transparent: true,
                    opacity: 1.0,
                    blending: THREE.NormalBlending 
                });
                const burstParticles = new THREE.Points(burstGeometry, burstMaterial);
                scene.add(burstParticles);

                let opacity = 1.0;
                 let burstAnimationFrameId = null; // ID for burst animation
                const animateBurst = () => {
                     if (!scene) { // Check if scene exists
                          if(burstAnimationFrameId) cancelAnimationFrame(burstAnimationFrameId); 
                          return; 
                      } 
                    opacity -= 0.06; 
                    if (opacity <= 0) {
                        scene.remove(burstParticles);
                         // Dispose Three.js objects when done
                         burstGeometry.dispose(); 
                         burstMaterial.dispose(); 
                         if(burstAnimationFrameId) cancelAnimationFrame(burstAnimationFrameId); // Stop loop
                    } else {
                        burstParticles.material.opacity = opacity;
                         burstAnimationFrameId = requestAnimationFrame(animateBurst); // Continue loop
                    }
                };
                 burstAnimationFrameId = requestAnimationFrame(animateBurst); // Start loop
            }

            // "Project Gateway" Effect
            let restoreTimeout = null; 
            function triggerParticleSwirlAroundElement(element, color = 0xA855F7) {
                if (!element || !particles || !particlePositions || !scene) return;
                
                 if (restoreTimeout) clearTimeout(restoreTimeout);

                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const radiusX = rect.width / 2 / window.innerWidth * 5;
                const radiusY = rect.height / 2 / window.innerHeight * 5;
                
                const worldCenter = screenToWorld(centerX, centerY);
                if (!worldCenter) return; 

                const tempColor = new THREE.Color(color);
                const positions = particles.geometry.attributes.position.array;
                const colors = particles.geometry.attributes.color.array;
                 // It's safer *not* to copy particlePositions if it's being updated elsewhere
                 // Instead, we'll restore directly to the original calculated values later

                for (let i = 0; i < positions.length / 3; i++) {
                    const currentX = positions[i * 3]; 
                    const currentY = positions[i * 3 + 1];

                    const distToCenter = Math.sqrt(
                        Math.pow(currentX - worldCenter.x, 2) +
                        Math.pow(currentY - worldCenter.y, 2)
                    );

                    if (distToCenter < Math.max(radiusX, radiusY) * 2) {
                        // Swirl towards center and color
                        positions[i * 3] += (worldCenter.x - currentX) * 0.1;
                        positions[i * 3 + 1] += (worldCenter.y - currentY) * 0.1;
                        positions[i * 3 + 2] = particlePositions[i * 3 + 2] * 0.5; // Shrink based on original Z
                        
                        colors[i * 3] = tempColor.r;
                        colors[i * 3 + 1] = tempColor.g;
                        colors[i * 3 + 2] = tempColor.b;
                    }
                }
                particles.geometry.attributes.position.needsUpdate = true;
                particles.geometry.attributes.color.needsUpdate = true;

                 restoreTimeout = setTimeout(() => {
                     // Check existence again before restoring
                    if (!particles || !particlePositions || !scene) return; 
                    const positions = particles.geometry.attributes.position.array;
                    const colors = particles.geometry.attributes.color.array;
                    const tempColor = new THREE.Color();
                    for (let i = 0; i < positions.length / 3; i++) {
                        // Restore directly from the original static array
                        positions[i * 3] = particlePositions[i * 3]; 
                        positions[i * 3 + 1] = particlePositions[i * 3 + 1];
                        positions[i * 3 + 2] = particlePositions[i * 3 + 2];
                        
                        // Restore original dark gray color
                        tempColor.setHSL(0, 0, Math.random() * 0.3);
                        colors[i * 3] = tempColor.r;
                        colors[i * 3 + 1] = tempColor.g;
                        colors[i * 3 + 2] = tempColor.b;
                    }
                    particles.geometry.attributes.position.needsUpdate = true;
                    particles.geometry.attributes.color.needsUpdate = true;
                     restoreTimeout = null; 
                }, 1500);
            }

            // --- 6. AI Summary Integration ---
             const aiSummaryButton = document.getElementById('modal-ai-summary-btn');

             if (aiSummaryButton && aiSummaryModal && aiSummaryTextElement) {
                 aiSummaryButton.addEventListener('click', async () => {
                     if (!currentProjectForAISummary) return;

                     aiSummaryTextElement.innerHTML = `<i>Generating summary for ${currentProjectForAISummary}...</i>`;
                     openAISummaryModal();

                     try {
                         const prompt = `Provide a concise, 2-3 sentence AI-generated summary for the project: "${currentProjectForAISummary}". Focus on its core functionality and key technologies. Make it sound professional and engaging for a portfolio website visitor.`;
                         const payload = { contents: [{ parts: [{ text: prompt }] }] };
                         const apiKey = ""; 
                         const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                         
                         // Simple fetch without backoff for now
                          let response;
                          try {
                             response = await fetch(apiUrl, { 
                                 method: 'POST', 
                                 headers: { 'Content-Type': 'application/json' }, 
                                 body: JSON.stringify(payload) 
                             });
                          } catch (fetchError) {
                              console.error("Network error fetching AI summary:", fetchError);
                              throw new Error("Network error. Please check connection.");
                          }

                         if (!response.ok) {
                              let errorBody = await response.text(); // Attempt to get error details
                              console.error("API Error Response:", errorBody);
                             throw new Error(`API error (${response.status}): ${response.statusText}`);
                         }

                         const result = await response.json();
                         const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;

                         if (text) {
                             aiSummaryTextElement.textContent = text;
                         } else {
                              const blockReason = result?.promptFeedback?.blockReason;
                             if (blockReason) {
                                  aiSummaryTextElement.textContent = `Content generation blocked: ${blockReason}.`;
                                  console.error("Gemini API blocked:", result.promptFeedback);
                             } else {
                                 aiSummaryTextElement.textContent = "Failed to generate summary. Unexpected response format.";
                                 console.error("Gemini API response structure unexpected:", result);
                             }
                         }
                     } catch (error) {
                         aiSummaryTextElement.textContent = `Error generating summary: ${error.message}`;
                         console.error("Error calling Gemini API:", error);
                     }
                 });
             }

        });
    </script>
</body>
</html>

